# 设置与配置

## 设置页结构

- AIFloatBallSettings：AI 悬浮球显示开关与相关说明。
  - 存储键：`Settings.showFloatBall`，切换方法：`src/renderer/src/store/Settings.ts:82-86`。
- DirectorySettings：缓存/下载目录路径选择、打开与重置；显示目录大小。
  - 入口与操作：`src/renderer/src/components/Settings/DirectorySettings.vue:1-75`。
  - 目录大小与打开：`src/renderer/src/components/Settings/DirectorySettings.vue:111-131`、`src/renderer/src/components/Settings/DirectorySettings.vue:169-195`。
  - 主进程 API 暴露：`src/preload/index.ts:179-191`。
- MusicCache：缓存信息与清理（通过预加载 `musicCache` API）。
  - 预加载 API：`src/preload/index.ts:74-79`。
- PlaylistSettings：播放列表的导出/导入/分享能力（详见“本地音乐与下载与缓存”）。
- UpdateSettings：自动更新检查与进度反馈（详见“AI 助手与自动更新”）。
- plugins：插件管理（详见“插件安装与管理”）。
- ThemeSelector：主题与外观选择（暗色主题支持）。

## 设置存储与持久化

- 全局设置存储：`localStorage.appSettings`，通过 `useSettingsStore` 管理默认值与更新。
  - 默认值与加载：`src/renderer/src/store/Settings.ts:24-33`、`src/renderer/src/store/Settings.ts:35-60`。
  - 更新与保存：`src/renderer/src/store/Settings.ts:76-86`。

## 目录配置与权限

- 缓存目录：用于播放缓存提升性能，网络不佳时减少卡顿。
- 下载目录：用于保存已下载音乐文件。
- 权限与路径：选择目录后建议“打开目录”确认访问权限；如出现打开失败，检查系统权限与盘符可用性。

## 建议的配置流程

- 首次使用：设置缓存与下载目录 → 启用悬浮球（可选） → 安装并选择插件与音源 → 检查自动更新。
- 进阶：根据网络状况开启/关闭“自动缓存音乐”、调整标签写入项（标题/艺术家/专辑/封面/歌词）。

