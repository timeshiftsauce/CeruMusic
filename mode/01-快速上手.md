# 快速上手

## 初次配置

- 打开设置 → 插件管理，点击“添加插件”，选择插件类别：澜音（CR）或洛雪（LX）。
  - 本地导入或在线导入（支持 `.js`/`.zip`），详见“插件安装与管理”。
  - 插件 UI 参考：`src/renderer/src/components/Settings/plugins.vue:25-53`、`src/renderer/src/components/Settings/plugins.vue:391-449`、`src/renderer/src/components/Settings/plugins.vue:451-494`。
- 安装后在插件列表中点击“使用”，将该插件设为当前插件，并选择其支持的音源与音质。
  - 选择逻辑参考：`src/renderer/src/components/Settings/plugins.vue:283-344`、`src/renderer/src/components/Settings/plugins.vue:333-341`。

## 搜索与播放

- 进入“搜索”页，输入关键词检索单曲或歌单，分页加载，支持标签切换（单曲/歌单）。
  - 搜索实现参考：`src/renderer/src/views/music/search.vue:102-149`、歌单搜索 `src/renderer/src/views/music/search.vue:213-261`。
- 播放与列表交互：
  - 双击单曲播放（并插入到当前播放位置之后）；单击可加入播放列表末尾。
  - 触发事件：添加并播放 `addToPlaylistAndPlay`，添加到末尾 `addToPlaylistEnd`。
    - 事件触发参考：`src/renderer/src/views/music/search.vue:176-183`、`src/renderer/src/views/music/search.vue:196-201`。
    - 事件处理参考：`src/renderer/src/utils/playlist/playlistManager.ts:86-128`、`src/renderer/src/utils/playlist/playlistManager.ts:135-155`。
- 歌单结果支持跳转歌单详情页并替换当前播放列表：`src/renderer/src/views/music/search.vue:263-276`、替换逻辑 `src/renderer/src/utils/playlist/playlistManager.ts:163-199`。

## 播放控制

- 全局音频组件自动管理播放、暂停、进度与时长：`src/renderer/src/components/Play/GlobalAudio.vue:172-186`。
- 系统媒体控制（SMTC）：支持系统层面的播放/暂停/上一首/下一首与拖动进度。
  - 安装控制器与动作处理：`src/renderer/src/utils/audio/globalControls.ts:14-28`、`src/renderer/src/utils/audio/useSmtc.ts:116-144`。

## 桌面歌词

- 设置 → 桌面歌词样式：配置字号、主色与阴影，并通过开关显示/隐藏桌面歌词。
  - UI 参考：`src/renderer/src/components/Settings/DesktopLyricStyle.vue:153`。
- 通过托盘菜单或设置开关显示/隐藏、锁定/解锁（锁定后窗口鼠标穿透）：`src/main/index.ts:51-97`、`src/main/events/lyric.ts:32-73`、`src/main/events/lyric.ts:138-155`。

## 下载与标签

- 在歌曲项点击“下载”，选择音质并执行下载；支持写入标题、艺术家、专辑、封面与歌词标签，标签项可在设置中启/停。
  - 下载流程与音质选择：`src/renderer/src/utils/audio/download.ts:155-173`、`src/renderer/src/utils/audio/download.ts:180-193`。
  - 标签写入项设置：`src/renderer/src/store/Settings.ts:24-33`、`src/renderer/src/store/Settings.ts:76-86`。

